<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <title>Матч-центр</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
<h1>Матч-центр</h1>
<div id="match-container">
    <!-- Существующие блоки матчей здесь -->
    <div class="match-block">
    </div>
</div>
</body>
<script>
    let tg = window.Telegram.WebApp


    let params = new URLSearchParams(document.location.search);
    let value = params.get('games'); // 'key' – это имя целевого параметра
    console.log(value.split('*'))
    arr = value.split('*')
    console.log(arr)
    console.log(arr.length)
    console.log(arr[0][1])
    window.addEventListener('scroll', function () {
        if (window.innerHeight + window.scrollY >= document.body.offsetHeight) {
            const matchContainer = document.getElementById('match-container');
            const newMatchBlocks = [];

            for (let i = 0; i < arr.length; i++) {
                text = arr[i].split('/')

                const newMatchBlock = document.createElement('div');
                newMatchBlock.classList.add('match-block');

                const h2 = document.createElement('h2');
                h2.textContent = `Матч`;
                newMatchBlock.appendChild(h2);

                const time = document.createElement('p');
                time.textContent = text[0];
                newMatchBlock.appendChild(time);

                const team1 = document.createElement('p');
                team1.textContent = text[1];
                newMatchBlock.appendChild(team1);

                const team2 = document.createElement('p');
                team2.textContent = text[2];
                newMatchBlock.appendChild(team2);

                const coefficientsDiv = document.createElement('div');
                coefficientsDiv.classList.add('coefficients');

                const coefficient1 = document.createElement('div');
                coefficient1.classList.add('coefficient');
                coefficient1.innerHTML = `
                <p>Букмекеры</p>
                <p>Победа :</p>
                <p>Ничья: </p>
                <p>Победа :</p>
            `;
                coefficientsDiv.appendChild(coefficient1);

                const coefficient2 = document.createElement('div');
                coefficient2.classList.add('coefficient');
                coefficient2.innerHTML = `
                <p>Букмекер 2</p>
                <p>Победа : </p>
                <p>Ничья:</p>
                <p>Победа : </p>
            `;
                coefficientsDiv.appendChild(coefficient2);

                newMatchBlock.appendChild(coefficientsDiv);

                const moreInfoLink = document.createElement('a');
                moreInfoLink.href = ``;
                moreInfoLink.textContent = 'Вывести данные';
                newMatchBlock.appendChild(moreInfoLink);

                newMatchBlocks.push(newMatchBlock);
            }

            newMatchBlocks.forEach(block => matchContainer.appendChild(block));
        }
    })
</script>

</html>
